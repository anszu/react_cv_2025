import{r as c,a as P,c as D,j as l}from"./iframe-Antqo0Sa.js";import{I as T}from"./InfoBox-Kl_KkFLc.js";const q=()=>{const e=c.useContext(P);if(e===null)throw new Error("useDataContext must be used within a DataProvider");return e},I=e=>{const t=D.c(3),{onClick:s}=e;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=l.jsx("span",{children:"ðŸ§ "}),t[0]=r):r=t[0];let o;return t[1]!==s?(o=l.jsxs("button",{onClick:s,"data-testid":"cta-button",className:"bg-blue-100 hover:bg-blue-200 text-blue-800 font-semibold px-4 py-2 rounded-lg shadow-sm transition-colors duration-200 cursor-pointer w-full",children:[r," Wondering if this CV is your next perfect match? Letâ€™s check it out!"]}),t[1]=s,t[2]=o):o=t[2],o};I.__docgenInfo={description:"",methods:[],displayName:"CtaButton",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const M=e=>{const t=D.c(4),{onClick:s,loading:r}=e,o=`text-sm self-end font-semibold py-2 px-4 rounded-lg border border-transparent bg-blue-600 text-white shadow-md hover:bg-blue-700 hover:shadow-lg transition-all duration-200 ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`;let n;return t[0]!==r||t[1]!==s||t[2]!==o?(n=l.jsx("button",{"data-testid":"match-button",onClick:s,disabled:r,className:o,children:"Check Match"}),t[0]=r,t[1]=s,t[2]=o,t[3]=n):n=t[3],n};M.__docgenInfo={description:"",methods:[],displayName:"MatchButton",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""}}};const R=e=>{const[t,s]=c.useState(!1),[r,o]=c.useState(""),[n,g]=c.useState(null),d="https://react-cv-2025.onrender.com/api/ask";return{loading:t,error:n,result:r,run:async a=>{g(null),s(!0);try{const i=await fetch(`${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cvData:e,jobDescription:a})});if(!i.ok)throw new Error("Server responded with an error");const u=await i.json();o(u.answer)}catch(i){console.error(i),g("An error occurred on the server. Please try again later."),o("")}finally{s(!1)}}}},V=()=>{const e=D.c(32),[t,s]=c.useState(!1),[r,o]=c.useState(null),[n,g]=c.useState(""),{contentData:d,contentError:y}=q(),{loading:a,error:i,result:u,run:S}=R(d);let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{s(J),g("")},e[0]=w):w=e[0];const $=w;let v;e[1]!==y||e[2]!==d||e[3]!==n||e[4]!==S?(v=()=>{if(o(null),!d||y){o("Error loading CV data, please try again later.");return}if(!n.trim()){o("Please enter a job description.");return}S(n)},e[1]=y,e[2]=d,e[3]=n,e[4]=S,e[5]=v):v=e[5];const k=v;let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j=l.jsx(I,{onClick:$}),e[6]=j):j=e[6];const E=!t,N=`flex flex-col transition-all duration-300 ease-in-out overflow-hidden ${t?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`;let C;e[7]===Symbol.for("react.memo_cache_sentinel")?(C=B=>g(B.target.value),e[7]=C):C=e[7];let p;e[8]!==n?(p=l.jsx("textarea",{"data-testid":"match-input",value:n,onChange:C,placeholder:"Paste the job description here...",className:"w-full p-2 border border-gray-300 rounded h-32 mb-2 mt-2"}),e[8]=n,e[9]=p):p=e[9];let m;e[10]!==i||e[11]!==a||e[12]!==r?(m=l.jsx(T,{validationError:r,serverError:i,loading:a}),e[10]=i,e[11]=a,e[12]=r,e[13]=m):m=e[13];let h;e[14]!==k||e[15]!==a?(h=l.jsx(M,{onClick:k,loading:a}),e[14]=k,e[15]=a,e[16]=h):h=e[16];let f;e[17]!==m||e[18]!==h?(f=l.jsxs("div",{className:"flex flex-row justify-between items-center gap-4",children:[m,h]}),e[17]=m,e[18]=h,e[19]=f):f=e[19];let x;e[20]!==E||e[21]!==N||e[22]!==p||e[23]!==f?(x=l.jsxs("div",{"data-testid":"match-container","aria-hidden":E,className:N,children:[p,f]}),e[20]=E,e[21]=N,e[22]=p,e[23]=f,e[24]=x):x=e[24];let b;e[25]!==i||e[26]!==a||e[27]!==u?(b=!i&&!a&&u&&l.jsx("p",{className:"mt-4 italic text-gray-700",children:u}),e[25]=i,e[26]=a,e[27]=u,e[28]=b):b=e[28];let _;return e[29]!==x||e[30]!==b?(_=l.jsxs("div",{className:"print:hidden",children:[j,x,b]}),e[29]=x,e[30]=b,e[31]=_):_=e[31],_};V.__docgenInfo={description:"",methods:[],displayName:"Match"};function J(e){return!e}export{V as M,q as u};
